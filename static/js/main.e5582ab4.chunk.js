(this["webpackJsonpsnapchat-clone"]=this["webpackJsonpsnapchat-clone"]||[]).push([[0],{123:function(e,t,a){},124:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){"use strict";a.r(t),a.d(t,"store",(function(){return ct}));var n=a(0),r=a.n(n),c=a(30),o=a.n(c),i=a(32),l=a(9),s=a(10),u=a(2),m=a(11),d=a(27),f=Object(s.c)({name:"app",initialState:{drawers:[],footerType:"full"},reducers:{showDrawer:{reducer:function(e,t){var a=t.payload,n=e.drawers.filter((function(e){return e.component!==a.component}));e.drawers=[].concat(Object(d.a)(n),[a])},prepare:function(e){return{payload:Object(m.a)(Object(m.a)({},{animationIn:"slideInUp",animationOut:"slideOutDown",animationInDuration:300,animationOutDuration:300,theme:"light",position:"front",show:!0}),e)}}},hideDrawer:function(e,t){var a=t.payload;e.drawers=e.drawers.map((function(e){return e.component===a?Object(m.a)(Object(m.a)({},e),{},{show:!1}):e}))},hideAllDrawers:function(e){var t,a=e.drawers.filter((function(e){return e.show})),n=a[a.length-1].component;t=1===a.length?e.drawers.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{show:!1})})):e.drawers.map((function(e){return e.component===n?Object(m.a)(Object(m.a)({},e),{},{show:!1}):Object(m.a)(Object(m.a)({},e),{},{show:!1,animationOutDuration:0})})),e.drawers=t},setFooterType:function(e,t){e.footerType=t.payload}}}),p=f.actions,h=p.showDrawer,b=p.hideDrawer,E=p.hideAllDrawers,v=p.setFooterType,g=f.reducer,O=a(4),w=a.n(O),j=a(3),y=a(8),k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return setTimeout(e,t)},N=function(){var e=Object(y.a)(w.a.mark((function e(t,a){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={newAppMessage:"./audio/blip.mp3",cameraShutter:"./audio/shutter.mp3"},a.src=n[t],e.prev=2,e.next=5,a.play();case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,a){return e.apply(this,arguments)}}(),C=navigator,x=C.language,I=void 0===x?"en-US":x,S=C.userAgent,M={baseURL:"./api",get:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return M.respond("get",e,null,t)},post:function(e,t){return M.respond("post",e,t)},put:function(e,t){return M.respond("put",e,t)},patch:function(e,t){return M.respond("patch",e,t)},delete:function(e){return M.respond("delete",e)},respond:function(){var e=Object(y.a)(w.a.mark((function e(t,a,n,r){var c,o,i,l;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r?a:M.baseURL+a,o=n?{headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(n)}:{},e.prev=2,e.next=5,fetch(c,Object(m.a)({method:t},o));case 5:return i=e.sent,e.next=8,i.json();case 8:return l=e.sent,e.abrupt("return",[null,l]);case 12:return e.prev=12,e.t0=e.catch(2),e.abrupt("return",[e.t0]);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,a,n,r){return e.apply(this,arguments)}}()},A=function(e){return e.then((function(e){return e instanceof Error?[e]:[null,e]})).catch((function(e){return[e]}))},L=function(e){return new Promise((function(t){return setTimeout(t,e)}))},D={loading:!1,error:!1,data:[]},R={cameraMode:"user",photoTaken:!1,photos:D},T=Object(s.b)("photos/getPhotos",Object(y.a)(w.a.mark((function e(){var t,a,n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.get("/photos.json");case 2:if(t=e.sent,a=Object(j.a)(t,2),n=a[0],r=a[1],n){e.next=8;break}return e.abrupt("return",r.photos);case 8:case"end":return e.stop()}}),e)})))),P=Object(s.c)({name:"photos",initialState:R,reducers:{setPhoto:{reducer:function(e,t){var a=t.payload,n=a.month,r=a.year,c=a.dataURL;e.photoTaken?e.photos.data[0].images.unshift(t.payload.dataURL):(e.photoTaken=!0,e.photos.data.unshift({month:n,year:r,images:[c]}))},prepare:function(e){var t=new Date;return{payload:{dataURL:e,month:t.toLocaleString("default",{month:"long"}),year:t.getFullYear()}}}},toggleCameraMode:function(e){e.cameraMode="user"===e.cameraMode?"environment":"user"}},extraReducers:function(e){e.addCase(T.pending,(function(e){e.photos.loading=!0})),e.addCase(T.fulfilled,(function(e,t){var a=e.photos,n=t.payload;a.loading=!1,n?a.data=n:a.error=!0})),e.addCase(T.rejected,(function(e){var t=e.photos;t.loading=!1,t.error=!0}))}}),F=P.actions,z=F.setPhoto,U=F.toggleCameraMode,H=P.reducer,J={session:{id:"",username:"",avatar:"",gender:"other",age:0,fullName:""},geolocation:{country:"",state:"",city:"",zip:"",latitude:0,longitude:0},friends:D},B=Object(s.b)("user/sessionFetched",Object(y.a)(w.a.mark((function e(){var t,a,n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.get("/session.json");case 2:if(t=e.sent,a=Object(j.a)(t,2),n=a[0],r=a[1],!n){e.next=8;break}return e.abrupt("return",!1);case 8:return e.abrupt("return",r.session);case 9:case"end":return e.stop()}}),e)})))),G=Object(s.b)("user/friendsFetched",Object(y.a)(w.a.mark((function e(){var t,a,n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.get("/friends.json");case 2:if(t=e.sent,a=Object(j.a)(t,2),n=a[0],r=a[1],!n){e.next=8;break}return e.abrupt("return",!1);case 8:return e.abrupt("return",r.friends);case 9:case"end":return e.stop()}}),e)})))),V=Object(s.b)("user/geoLocationFetched",Object(y.a)(w.a.mark((function e(){var t,a,n,r,c,o,i,l,s,u;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.get("https://geolocation-db.com/json/",!0);case 2:if(t=e.sent,a=Object(j.a)(t,2),n=a[0],r=a[1],!n){e.next=8;break}return e.abrupt("return",!1);case 8:return c=r.country_name,o=r.state,i=r.city,l=r.postal,s=r.latitude,u=r.longitude,e.abrupt("return",{country:c,state:o,city:i,zip:l,latitude:s,longitude:u});case 10:case"end":return e.stop()}}),e)})))),W=Object(s.c)({name:"user",initialState:J,reducers:{setLatLon:function(e,t){var a=e.geolocation,n=t.payload,r=n.latitude,c=n.longitude;a.latitude=r,a.longitude=c}},extraReducers:function(e){e.addCase(B.fulfilled,(function(e,t){var a=t.payload;a&&(e.session=a)})),e.addCase(V.fulfilled,(function(e,t){var a=t.payload;a&&(e.geolocation=a)})),e.addCase(G.pending,(function(e){e.friends.loading=!0})),e.addCase(G.fulfilled,(function(e,t){var a=e.friends,n=t.payload;a.loading=!1,n?a.data=n:a.error=!0})),e.addCase(G.rejected,(function(e){var t=e.friends;t.loading=!1,t.error=!0}))}}),_=W.actions.setLatLon,Y=W.reducer,q={sn:"snow",sl:"sleet",h:"hail",t:"thunderstorm",s:"showers",c:"clear",hr:"heavy-rain",lr:"light-rain",hc:"heavy-cloud",lc:"light-cloud"},Z={snow:"faSnowflake",sleet:"faIcicles",hail:"faCloudMeatball",thunderstorm:"faPooStorm",showers:"faCloudShowersHeavy",clear:"faSun","heavy-rain":"faCloudShowersHeavy","light-rain":"faCloudRain","heavy-cloud":"faCloud","light-cloud":"faCloudSun"},Q=Object(s.b)("snapMap/snapsFetched",function(){var e=Object(y.a)(w.a.mark((function e(t){var a,n,r,c,o,i,l,s,u,d;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.lat,n=t.lon,r=t.city,c=t.state,e.next=3,M.get("/snaps.json?geo=".concat(a,",").concat(n));case 3:if(o=e.sent,i=Object(j.a)(o,2),l=i[0],s=i[1],!l){e.next=9;break}return e.abrupt("return",!1);case 9:return u=[{lat:a+.006,lon:n-.006},{lat:a+.009,lon:n+.005},{lat:a+.006,lon:n-.001},{lat:a-.005,lon:n-.002},{lat:a-.001,lon:n-.005},{lat:a+.005,lon:n- -.006},{lat:a,lon:n+.004}],d=s.snaps.map((function(e,t){return Object(m.a)(Object(m.a)({},e),{},{location:r&&c?"".concat(r,", ").concat(c):null,lat:u[t].lat,lon:u[t].lon})})),e.abrupt("return",d);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),K=Object(s.b)("snapMap/weatherFetched",function(){var e=Object(y.a)(w.a.mark((function e(t){var a,n,r,c,o,i,l,s,u,m,d,f,p,h,b,E;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.lat,c=t.lon,o="https://api.allorigins.win/get?url=".concat(encodeURIComponent("https://www.metaweather.com/api/location")),i={temperature:75,condition:"clear"},e.next=5,M.get("".concat(o,"/search/?lattlong=").concat(r,",").concat(c),!0);case 5:if(l=e.sent,s=Object(j.a)(l,2),u=s[0],m=s[1],!u){e.next=11;break}return e.abrupt("return",!1);case 11:return d=null===(a=JSON.parse(m.contents)[0])||void 0===a?void 0:a.woeid,e.next=14,M.get("".concat(o,"/").concat(d,"/"),!0);case 14:if(f=e.sent,p=Object(j.a)(f,2),u=p[0],m=p[1],!u){e.next=20;break}return e.abrupt("return",!1);case 20:return h=JSON.parse(null===(n=m)||void 0===n?void 0:n.contents).consolidated_weather[0],b=h.the_temp,E=h.weather_state_abbr,i={temperature:(v=b,Math.round(1.8*v+32)),condition:q[E]},e.abrupt("return",i);case 23:case"end":return e.stop()}var v}),e)})));return function(t){return e.apply(this,arguments)}}()),$=Object(s.c)({name:"snapMap",initialState:{snaps:[],weather:{temperature:0,condition:""}},reducers:{},extraReducers:function(e){e.addCase(K.fulfilled,(function(e,t){var a=t.payload;a&&(e.weather=a)})),e.addCase(Q.fulfilled,(function(e,t){var a=t.payload;a&&(e.snaps=a)}))}}).reducer,X={type:"",url:"",location:"",lat:0,lon:0,time:0,caption:"",shareable:!1},ee=X,te=Object(s.c)({name:"snap",initialState:ee,reducers:{addSnap:function(e,t){return t.payload},removeSnap:function(e){return X}}}),ae=te.actions,ne=ae.addSnap,re=ae.removeSnap,ce=te.reducer,oe={thread:"Lisa",messages:D},ie=Object(s.b)("chat/messagesReceived",function(){var e=Object(y.a)(w.a.mark((function e(t){var a,n,r,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.get("/messages.json?thread=".concat(t));case 2:if(a=e.sent,n=Object(j.a)(a,2),r=n[0],c=n[1],!r){e.next=8;break}return e.abrupt("return",!1);case 8:return e.abrupt("return",c.messages);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),le=Object(s.c)({name:"chat",initialState:oe,reducers:{postMessage:{reducer:function(e,t){var a=t.payload,n=a.id,r=a.author,c=a.message,o=a.time;e.messages.data.push({id:n,author:r,message:c,time:o})},prepare:function(e,t){return{payload:{id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),author:e,message:t,time:JSON.stringify(new Date)}}}}},extraReducers:function(e){e.addCase(ie.pending,(function(e){e.messages.loading=!0})),e.addCase(ie.fulfilled,(function(e,t){var a=e.messages,n=t.payload;a.loading=!1,n?a.data=n:a.error=!0})),e.addCase(ie.rejected,(function(e){var t=e.messages;t.loading=!1,t.error=!0}))}}),se=le.actions.postMessage,ue=le.reducer,me=a(13),de=a(6),fe=a.n(de),pe=a(55),he=a(39),be=a(56),Ee=a(1),ve=(a(68),{faSnapchatSquare:he.b,faGithub:he.a,faCircle:be.a,faCamera:Ee.e,faUserPlus:Ee.bb,faListAlt:Ee.z,faGrinBeam:Ee.w,faAngleRight:Ee.c,faCompass:Ee.n,faUserCircle:Ee.ab,faSearch:Ee.O,faRetweet:Ee.M,faAngleDown:Ee.a,faLocationArrow:Ee.A,faSignal:Ee.Q,faBatteryHalf:Ee.d,faCommentAlt:Ee.m,faMobile:Ee.D,faMobileAlt:Ee.E,faDot:Ee.f,faLaugh:Ee.y,faSmileWink:Ee.R,faEllipsisV:Ee.t,faEllipsisH:Ee.s,faCog:Ee.l,faTimesCircle:Ee.Z,faTimes:Ee.Y,faAngleLeft:Ee.b,faSearchPlus:Ee.P,faPaw:Ee.G,faSpider:Ee.T,faWater:Ee.db,faPhoneAlt:Ee.I,faVideo:Ee.cb,faRocket:Ee.N,faMicrophone:Ee.C,faDownload:Ee.q,faTextHeight:Ee.X,faPen:Ee.H,faStickyNote:Ee.U,faCut:Ee.p,faPaperclip:Ee.F,faCropAlt:Ee.o,faStopwatch:Ee.V,faExternalLinkAlt:Ee.v,faPlayCircle:Ee.J,faEdit:Ee.r,faMagic:Ee.B,faQrcode:Ee.L,faSnowflake:Ee.S,faIcicles:Ee.x,faCloudMeatball:Ee.h,faPooStorm:Ee.K,faCloudShowersHeavy:Ee.j,faCloudRain:Ee.i,faCloud:Ee.g,faCloudSun:Ee.k,faSun:Ee.W,faExclamationCircle:Ee.u}),ge=function(e){var t=e.icon,a=e.onClick,n=e.className,c=void 0===n?"":n;return t?r.a.createElement(pe.a,{icon:ve[t],onClick:a,className:fe()("icon",Object(me.a)({},c,!0))}):null},Oe=(a(69),function(e){var t,a=e.image,n=e.icon,c=e.icons,o=e.iconClass,i=void 0===o?"":o,l=e.iconClasses,s=void 0===l?[]:l,u=e.buttonClass,m=void 0===u?"":u,d=e.round,f=e.plain,p=e.purple,h=e.label,b=e.onclick,E=e.testId;return r.a.createElement("button",{type:"button",onClick:b,className:fe()("btn",(t={},Object(me.a)(t,m,!0),Object(me.a)(t,"round",d),Object(me.a)(t,"plain",f),Object(me.a)(t,"purple",p),t)),"data-test":E},a?r.a.createElement("img",{src:a,alt:""}):c?c.map((function(e,t){return r.a.createElement(ge,{key:e+t,icon:e,className:fe()(Object(me.a)({},s[t],s[t]))})})):n?r.a.createElement(ge,{icon:n,className:fe()(Object(me.a)({},i,!0))}):null,h&&r.a.createElement("strong",null,h))}),we=(a(70),function(e){var t=e.placeholder,a=e.value,c=e.leftIcon,o=e.rightIcon,i=e.onClick,l=e.onFocus,s=e.onBlur,u=e.onChange,m=e.onEnter,d=e.focus,f=e.spellCheck,p=e.animate,h=e.dark,b=Object(n.useRef)(null),E=Object(n.useState)(!1),v=Object(j.a)(E,2),g=v[0],O=v[1];Object(n.useEffect)((function(){p&&O(!0),k((function(){var e;d&&(null===b||void 0===b||null===(e=b.current)||void 0===e||e.focus())}))}),[p,d]);var w=!!i;return r.a.createElement("div",{className:fe()("input",{animate:p,full:g,dark:h}),"data-test":"input"},w&&r.a.createElement("div",{className:"disabled-overlay",onClick:i}),c&&r.a.createElement(ge,{icon:c,className:"left-icon"}),r.a.createElement("input",{type:"text",ref:b,placeholder:t,value:a,onClick:i,onFocus:l,onBlur:s,onChange:u,onKeyPress:function(e){var t=e.key;return m&&"Enter"===t&&m()},disabled:w,spellCheck:f||!1,className:fe()({"has-left-icon":c}),"data-test":"field"}),o&&r.a.createElement(ge,{icon:o,className:"right-icon"}))}),je=(a(71),function(e){var t=e.insideDrawer,a=Object(u.b)(),n=Object(u.c)((function(e){return e.user})).session.avatar,c=n?{image:n}:{icon:"faUserCircle"};return r.a.createElement("header",{className:"header","data-test":"header"},r.a.createElement(Oe,Object.assign({},c,{onclick:function(){return a(h({component:"account"}))},buttonClass:"btn-user",testId:"btn-user"})),r.a.createElement(we,{placeholder:"Search",leftIcon:"faSearch",rightIcon:"faUserPlus",dark:t,onClick:function(){return a(h({component:"search",animationIn:"fadeIn",animationOut:"fadeOut",animationInDuration:200,animationOutDuration:200}))}}),r.a.createElement("div",{className:"right"},t?r.a.createElement(ge,{icon:"faEllipsisH"}):r.a.createElement(Oe,{icon:"faRetweet",buttonClass:"btn-flip-camera",onclick:function(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(S)?a(U()):alert("You need a front facing camera for this, try it on your phone!")}})))}),ye=function(e){return e.some((function(e){return e.show}))},ke=(a(72),function(){var e=Object(u.c)((function(e){return e.app})).drawers,t=Object(n.useState)(""),a=Object(j.a)(t,2),c=a[0],o=a[1],i=function(){var e=(new Date).toLocaleTimeString(I,{hour:"numeric",minute:"2-digit"}).replace(/AM|PM/,"");o(e)};return Object(n.useEffect)((function(){i(),setInterval(i,1e3)}),[]),r.a.createElement("div",{className:fe()("toolbar",{dark:ye(e)})},r.a.createElement("div",{className:"left"},r.a.createElement("time",null,c),r.a.createElement(ge,{icon:"faLocationArrow"})),r.a.createElement("div",{className:"right"},r.a.createElement(ge,{icon:"faSignal",className:"icon-signal"}),r.a.createElement(ge,{icon:"faBatteryHalf"})))}),Ne=a(18),Ce=(a(123),function(e){var t=e.header,a=e.className,n=void 0===a?"":a,c=e.transparent,o=e.children;return r.a.createElement("section",{className:fe()("widget",Object(me.a)({},n,!0))},r.a.createElement("header",null,t),r.a.createElement("div",{className:fe()("inner-content",{transparent:c})},o))}),xe=(a(124),function(e){var t=e.leftIcon,a=e.rightIcon,n=e.label,c=e.straightEdge;return r.a.createElement("article",{className:fe()("pod","action-item",{"straight-edge":c})},r.a.createElement(ge,{icon:t,className:"ico-left"}),n,r.a.createElement(Oe,{icon:a,buttonClass:"ico-right"}))}),Ie=a(19),Se=a.n(Ie),Me=(a(125),function(e){var t=e.fixed,a=e.nobg,n=e.message;return r.a.createElement("div",{className:fe()("loading",{fixed:t,message:n,nobg:a})},r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"sk-cube-grid"},new Array(9).fill(null).map((function(e,t){return r.a.createElement("div",{key:"cube-".concat(t),className:"sk-cube sk-cube"+t})}))),n&&r.a.createElement("span",null,n)))}),Ae=(a(126),"pk.eyJ1IjoidGtwb3A3NzciLCJhIjoiY2tjZWNhcmRzMDBtZTJ6bnExbG4ya2ludiJ9.J2MYqCdGMZENpyzI0blWPg"),Le=!!Ae.length;Le&&(Se.a.accessToken=Ae);var De=function(){var e=Object(u.b)(),t=Object(n.useRef)(null),a=Object(n.useState)(!0),c=Object(j.a)(a,2),o=c[0],i=c[1];Object(n.useEffect)((function(){Le&&Object(y.a)(w.a.mark((function t(){var a,n,r,c,o,i;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(V());case 2:(a=t.sent).payload?(n=a.payload,r=n.latitude,c=n.longitude,l(r,c)):(o=function(t,a){l(t,a),e(_({latitude:t,longitude:a}))},i=function(){return o(40.75491,-73.994102)},"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(e){var t=e.coords;o(t.latitude,t.longitude)}),(function(e){i()}),{maximumAge:1/0,timeout:5e3,enableHighAccuracy:!0}):i());case 4:case"end":return t.stop()}}),t)})))()}),[e]);var l=function(e,a){if(t.current)var n=new Se.a.Map({container:t.current,style:"mapbox://styles/mapbox/streets-v11",center:[a,e],zoom:13,interactive:!1}).on("load",(function(){i(!1);var t=document.createElement("div");t.classList.add("self-marker"),new Se.a.Marker(t).setLngLat([a,e]).addTo(n)}))};return r.a.createElement("div",{className:"preview-map","data-test":"preview-map",onClick:function(){return Le&&e(h({component:"snapMap",animationIn:"fadeIn",animationOut:"fadeOut",animationInDuration:0,animationOutDuration:0,theme:"stripped"}))}},Le?o?r.a.createElement(Me,null):null:r.a.createElement("div",{className:"api-key-msg"},r.a.createElement("p",null,r.a.createElement("span",{role:"img","aria-label":"earth emoji"},"\ud83c\udf0e")," ","Get a free mapboxgl"," ",r.a.createElement("a",{href:"https://docs.mapbox.com/help/glossary/access-token/",target:"_blank",rel:"noopener noreferrer"},"API key here"),", then rename the ",r.a.createElement("code",null,".env.sample")," file at the root of the project to just ",r.a.createElement("code",null,".env")," and place the key inside, finally run",r.a.createElement("code",null,"npm start")," again to view the snap map features!")),Le&&r.a.createElement("div",{className:"map",ref:t}))},Re=(a(127),(new Date).toLocaleDateString(I,{year:"numeric",month:"long",day:"numeric"})),Te=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.user})).session.username;return r.a.createElement("main",{className:"account"},r.a.createElement("header",null,r.a.createElement(Oe,{icon:"faAngleDown",onclick:function(){return e(b("account"))},buttonClass:"btn-close"}),r.a.createElement(ge,{icon:"faCog",className:"ico-gear"})),r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:"./images/logo.svg",alt:""}),r.a.createElement("strong",null,t)),r.a.createElement(Ce,{header:"Stories",transparent:!0},r.a.createElement(xe,{leftIcon:"faCamera",rightIcon:"faEllipsisV",label:"Add to My Story"}),r.a.createElement(xe,{leftIcon:"faCamera",rightIcon:"faEllipsisV",label:"Add to Our Story"})),r.a.createElement(Ce,{header:"Friends",transparent:!0},r.a.createElement(xe,{leftIcon:"faUserPlus",rightIcon:"faAngleRight",label:"Add Friends"}),r.a.createElement(xe,{leftIcon:"faListAlt",rightIcon:"faAngleRight",label:"My Friends"})),r.a.createElement(Ce,{header:"Bitmoji",transparent:!0},r.a.createElement(xe,{leftIcon:"faGrinBeam",rightIcon:"faAngleRight",label:"Create Bitmoji"})),r.a.createElement(Ce,{header:"Snap Map"},r.a.createElement(De,null),r.a.createElement(xe,{leftIcon:"faCompass",rightIcon:"faAngleRight",label:"Set a Status",straightEdge:!0})),r.a.createElement("footer",null,r.a.createElement("p",null,r.a.createElement("a",{href:"https://github.com/TowhidKashem/snapchat-clone",target:"_blank",rel:"noopener noreferrer",title:"Github Repo"},r.a.createElement(ge,{icon:"faGithub"})),"Joined SnapChat on ",Re)))},Pe=(a(128),{sm:45,md:100,lg:150}),Fe=function(e){var t=e.src,a=e.size,n=void 0===a?"md":a;return r.a.createElement("img",{src:t,className:"avatar",alt:"",width:Pe[n]})},ze=(a(129),function(e){var t=e.user,a=t.username,n=t.fullName,c=t.avatar;return r.a.createElement("article",{className:"pod user"},r.a.createElement(Fe,{src:c,size:"sm"}),r.a.createElement("div",{className:"meta"},r.a.createElement("header",null,n),r.a.createElement("span",null,a)))}),Ue=(a(130),function(e){var t=e.message,a=void 0===t?"Oops couldn't load content":t;return r.a.createElement("div",{className:"error"},r.a.createElement("p",null,r.a.createElement(ge,{icon:"faExclamationCircle"})," ",a))}),He=(a(131),function(e){var t=e.show,a=Object(u.b)(),c=Object(u.c)((function(e){return e.user})).friends,o=c.loading,i=c.error,l=c.data,s=Object(n.useState)(""),m=Object(j.a)(s,2),d=m[0],f=m[1];Object(n.useEffect)((function(){t||f("")}),[t]);var p=new RegExp(d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"),h=d?l.filter((function(e){var t=e.fullName,a=e.username;return t.match(p)||a.match(p)})):l,E=(null===h||void 0===h?void 0:h.length)>0;return r.a.createElement("main",{className:"search"},r.a.createElement("header",null,r.a.createElement(we,{placeholder:"Search",leftIcon:"faSearch",value:d,onChange:function(e){return f(e.currentTarget.value)},focus:t,animate:!0,dark:!0}),r.a.createElement(Oe,{label:"Cancel",plain:!0,onclick:function(){return a(b("search"))},testId:"btn-cancel"})),r.a.createElement("section",null,o?r.a.createElement(Me,{nobg:!0}):i?r.a.createElement(Ue,null):r.a.createElement(Ne.Animated,{animationIn:"slideInUp",animationOut:"slideOutDown",animationInDuration:250,animationOutDuration:0,isVisible:t},r.a.createElement("div",{className:"results"},E&&r.a.createElement(Ce,{header:"Quick Add"},h.map((function(e){return r.a.createElement(ze,{key:e.id,user:e})})))),d&&!E&&r.a.createElement("p",{className:"no-results"},r.a.createElement("span",{role:"img","aria-label":"poop emoji"},"\ud83d\udca9")," ","No results"))))}),Je=(a(132),function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return{user:e.user,snapMap:e.snapMap}})),a=t.user.geolocation.city,n=t.snapMap.weather,c=n.temperature,o=n.condition;return r.a.createElement("header",{className:"weather-header"},r.a.createElement("div",{className:"left"},r.a.createElement(Oe,{icon:"faTimes",round:!0,onclick:function(){return e(b("snapMap"))},buttonClass:"btn-close",testId:"btn-close"}),r.a.createElement(Oe,{icon:"faSearch",round:!0})),r.a.createElement("div",{className:"center"},r.a.createElement("article",{className:"weather"},r.a.createElement("header",null,a),r.a.createElement("div",{className:"condition"},r.a.createElement(ge,{icon:Z[o]}),r.a.createElement("span",{className:"temperature"},c,"\xb0F")))),r.a.createElement("div",{className:"right"},r.a.createElement(Oe,{icon:"faCog",round:!0})))});a(133);Se.a.accessToken="pk.eyJ1IjoidGtwb3A3NzciLCJhIjoiY2tjZWNhcmRzMDBtZTJ6bnExbG4ya2ludiJ9.J2MYqCdGMZENpyzI0blWPg";var Be=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return{user:e.user,snapMap:e.snapMap}})),a=t.user.geolocation,c=t.snapMap.snaps,o=Object(n.useRef)(null),i=Object(n.useState)(!0),l=Object(j.a)(i,2),s=l[0],m=l[1],d=Object(n.useState)(null),f=Object(j.a)(d,2),p=f[0],b=f[1],E=a.latitude,v=a.longitude,g=a.city,O=a.state;return Object(n.useEffect)((function(){e(Q({lat:E,lon:v,city:g,state:O})),e(K({lat:E,lon:v})),o.current&&b(new Se.a.Map({container:o.current,style:"mapbox://styles/mapbox/streets-v11",center:[v,E],zoom:13}).on("load",(function(){return m(!1)})))}),[e,E,v,g,O]),Object(n.useEffect)((function(){if(p){!function(){var e=document.createElement("div");e.classList.add("self-marker"),new Se.a.Marker(e).setLngLat([v,E]).addTo(p),setTimeout((function(){e.classList.add("zoomed-in"),new Se.a.Popup({closeOnClick:!1}).setLngLat([v,E]).setHTML("<header>Me</header>\n              <p>Not Sharing Location</p>").addTo(p)}),2300)}(),setTimeout((function(){return p.flyTo({zoom:14})}),2e3)}}),[p,E,v]),Object(n.useEffect)((function(){c.map((function(t){return function(t){var a=t.lat,n=t.lon,r=document.createElement("a");r.classList.add("marker"),r.setAttribute("data-test","marker"),r.addEventListener("click",(function(a){a.preventDefault(),a.target.classList.add("active"),k((function(){e(ne(t)),e(h({component:"snap",animationIn:"zoomIn",animationOut:"zoomOut",theme:"dark"}))}),900),k((function(){return a.target.classList.remove("active")}),1e3)})),a&&n&&new Se.a.Marker(r).setLngLat([n,a]).addTo(p)}(t)}))}),[c,p,e]),r.a.createElement("div",{className:"snap-map"},r.a.createElement("div",{className:"inner"},s&&r.a.createElement(Me,null),r.a.createElement(Je,null),r.a.createElement("div",{ref:o,className:"content"})))},Ge=(a(134),function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.snap})),a=Object(n.useRef)(null),c=t.location,o=t.time,i=t.type,l=t.url,s=t.caption,m=t.shareable;Object(n.useEffect)((function(){"video"===i&&a.current&&(a.current.load(),a.current.play())}),[t,i]);var d=function(){e(b("snap")),k((function(){return e(re())}))};return r.a.createElement("main",{className:"snap",onClick:d,"data-test":"snap"},r.a.createElement("header",{className:fe()({metadata:c||o})},(c||o)&&r.a.createElement("div",{className:"left"},c&&r.a.createElement("span",{"data-test":"location"},c),o&&r.a.createElement("time",{"data-test":"time"},function(e){var t=Date.now()-e;return t<6e4?Math.floor(t/1e3)+" seconds ago":t<36e5?Math.floor(t/6e4)+" minutes ago":t<864e5?Math.floor(t/36e5)+" hours ago":t<2592e6?Math.floor(t/864e5)+" days ago":t<31536e6?Math.floor(t/2592e6)+" months ago":Math.floor(t/31536e6)+" years ago"}(o))),r.a.createElement("div",{className:"right"},r.a.createElement(Oe,{icon:"faEllipsisV"}))),"video"===i?r.a.createElement("div",{className:"video-container"},r.a.createElement("video",{ref:a,playsInline:!0,onEnded:d,"data-test":"video"},r.a.createElement("source",{src:l,type:"video/mp4"}))):r.a.createElement("div",{className:"image-container","data-test":"image"},s&&r.a.createElement("div",{className:"caption","data-test":"caption"},s),r.a.createElement("img",{src:l,alt:""})),m&&r.a.createElement("footer",null,r.a.createElement(Oe,{icon:"faLocationArrow"})))}),Ve=(a(135),function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.camera})),a=t.photos,n=t.photoTaken;return r.a.createElement("main",{className:"archive"},r.a.createElement(je,{insideDrawer:!0}),a.loading?r.a.createElement(Me,{nobg:!0}):a.error?r.a.createElement(Ue,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"view-options"},r.a.createElement(Oe,{label:"Snaps",buttonClass:"active"}),r.a.createElement(Oe,{label:"Camera Roll"})),!n&&r.a.createElement("section",{className:"message","data-test":"placeholder-msg"},r.a.createElement("p",null,"Take a photo and it will appear here!")),a.data.map((function(t){var a=t.month,n=t.year,c=t.images;return r.a.createElement("section",{key:a,className:"month","data-test":"month"},r.a.createElement("h3",null,a," ",n),c.map((function(t,a){return r.a.createElement("img",{key:t+a,src:t,width:100,alt:"",onClick:function(){return function(t){e(ne({type:"photo",url:t,shareable:!0})),e(h({component:"snap",animationIn:"zoomIn",animationOut:"zoomOut",theme:"dark"}))}(t)},"data-test":"snap-image"})})))}))))}),We=["Oh wow I can't believe it!","Hahaha you're so right!!","No way, when?!! \ud83d\ude31","OMG I totally agree!","Umm I'm not so sure about that one \ud83e\udd28","Wait, you are actually being serious rn?","Hahahahaha you're too much \ud83d\ude02\ud83d\ude02\ud83d\ude02","Did you watch the new show last night?","\ud83e\udd21"],_e=(a(136),function(e){var t=e.icons;return r.a.createElement("div",{className:"pill"},t.map((function(e){return r.a.createElement(Oe,{key:e,icon:e})})))}),Ye=(a(137),function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return{user:e.user,chat:e.chat}})),a=t.user.session.username,c=t.chat,o=c.thread,i=c.messages,l=Object(n.useRef)(null),s=Object(n.useRef)(null),m=Object(n.useState)(""),d=Object(j.a)(m,2),f=d[0],p=d[1],h=Object(n.useState)(!1),E=Object(j.a)(h,2),v=E[0],g=E[1];Object(n.useLayoutEffect)((function(){l.current&&(l.current.scrollTop=l.current.scrollHeight)}),[i]);var O=Object(n.useCallback)(function(){var t=Object(y.a)(w.a.mark((function t(a){var n,r,c;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a?[1e3,0]:[800,500,1e3,700,600,0],r=0;case 2:if(!(r<n.length)){t.next=10;break}return g((function(e){return!e})),t.next=6,L(n[r]);case 6:return t.abrupt("continue",7);case 7:r++,t.next=2;break;case 10:c=a?"Soooo, how was it!?":(i=We)[Math.floor(Math.random()*i.length)],e(se(o,c)),s.current&&N("newAppMessage",s.current);case 13:case"end":return t.stop()}var i}),t)})));return function(e){return t.apply(this,arguments)}}(),[o,e]);Object(n.useEffect)((function(){e(ie(o)),O(!0)}),[o,O,e]);var k=function(){f.length&&(e(se(a,f)),p(""),setTimeout(O,1e3))};return r.a.createElement("main",{className:"chat"},r.a.createElement("header",null,r.a.createElement(Fe,{src:"./images/bitmoji-other.png"}),r.a.createElement("h2",null,o),r.a.createElement("div",{className:"right"},r.a.createElement(_e,{icons:["faPhoneAlt","faVideo"]}),r.a.createElement(Oe,{icon:"faAngleRight",onclick:function(){return e(b("chat"))},buttonClass:"btn-arrow",testId:"btn-close-chat"}))),r.a.createElement("section",{ref:l,className:"messages"},i.loading?r.a.createElement(Me,{nobg:!0}):i.error?r.a.createElement(Ue,null):i.data.map((function(e){var t=e.author,n=e.message,c=e.time;return r.a.createElement("article",{key:c,className:fe()("message",{other:t!==a}),"data-test":"message"},r.a.createElement("header",null,t!==a?t:"Me"),r.a.createElement("blockquote",null,n))}))),r.a.createElement("footer",null,r.a.createElement("div",{className:fe()("gravatar",{typing:v})},r.a.createElement(Fe,{src:"./images/bitmoji-other.png"})),r.a.createElement("div",{className:"inner-content"},r.a.createElement(Oe,{icon:"faCamera",buttonClass:"btn-camera",round:!0}),r.a.createElement(we,{placeholder:"Send a chat",rightIcon:"faMicrophone",onChange:function(e){return p(e.currentTarget.value)},onEnter:k,onBlur:k,value:f}),r.a.createElement("div",{className:"right"},r.a.createElement(Oe,{icon:"faSmileWink"}),r.a.createElement(Oe,{icons:["faMobile","faMobileAlt"],buttonClass:"btn-archive"}),r.a.createElement(Oe,{icon:"faRocket"})))),r.a.createElement("audio",{ref:s,className:"app-sound"}))}),qe=(a(138),function(e){var t=e.count,a=void 0===t?1:t;return r.a.createElement(r.a.Fragment,null,new Array(a).fill(null).map((function(e,t){return r.a.createElement("article",{key:"frame-".concat(t),className:"skeleton-frame"})})))}),Ze=(a(139),function(e){var t=e.title,a=e.image,n=e.testId;return r.a.createElement("article",{className:"pod spotlight","data-test":n},r.a.createElement("img",{src:a,alt:""}),r.a.createElement("div",{className:"meta"},r.a.createElement("header",null,t)))}),Qe=(a(140),function(e){var t=e.drawerContent,a=Object(n.useRef)(null),c=Object(n.useRef)(!1),o=Object(n.useRef)(function(e,t){var a;return function(){for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];var o=function(){a=null,e.apply(void 0,r)};a&&clearTimeout(a),a=setTimeout(o,t)}}((function(){!c.current&&function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.current)return!1;var a=e.current.getBoundingClientRect(),n=a.top,r=a.bottom,c=t?n>=0&&r<=window.innerHeight:n<window.innerHeight&&r>=0;return c}(a)&&u((function(e){return e+1}))}),10)),i=Object(n.useState)(1),l=Object(j.a)(i,2),s=l[0],u=l[1],m=Object(n.useState)([]),f=Object(j.a)(m,2),p=f[0],h=f[1];return Object(n.useEffect)((function(){var e;null===t||void 0===t||null===(e=t.current)||void 0===e||e.addEventListener("scroll",o.current)}),[t]),Object(n.useEffect)((function(){Object(y.a)(w.a.mark((function e(){var a,n,r,i,l;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.current=!0,e.next=3,M.get("/discover/page/".concat(s,".json"));case 3:if(n=e.sent,r=Object(j.a)(n,2),i=r[0],l=r[1],i){e.next=13;break}if(1!==s){e.next=11;break}return e.next=11,L(1e3);case 11:h((function(e){return[].concat(Object(d.a)(e),Object(d.a)(l.discover))})),c.current=!1;case 13:3===s&&(null===t||void 0===t||null===(a=t.current)||void 0===a||a.removeEventListener("scroll",o.current));case 14:case"end":return e.stop()}}),e)})))()}),[s,t]),r.a.createElement("main",{className:"discover"},r.a.createElement(je,{insideDrawer:!0}),r.a.createElement("section",{className:"view"},r.a.createElement(Ce,{className:"friends",header:"Friends",transparent:!0},r.a.createElement("p",null,"Stories from your friends will appear here."),r.a.createElement(Oe,{label:"Add Friends",purple:!0})),r.a.createElement(Ce,{header:"For You",transparent:!0},r.a.createElement("div",{className:"inner"},p.length?p.map((function(e){var t=e.image,a=e.title;return r.a.createElement(Ze,{key:t,image:t,title:a,testId:"discover-item"})})):r.a.createElement(qe,{count:10}))),r.a.createElement("div",{ref:a,className:"load-more"})))}),Ke=(a(141),function(){var e=Object(u.c)((function(e){return e.app})).drawers,t=Object(n.useRef)(null);return r.a.createElement(r.a.Fragment,null,e&&e.map((function(e){var a=e.component,n=e.animationIn,c=e.animationOut,o=e.animationInDuration,i=e.animationOutDuration,l=e.show,s=void 0!==l&&l,u=e.theme,m=e.position,d=document.getElementById(a);return s?null===d||void 0===d||d.classList.remove("collapse"):k((function(){return null===d||void 0===d?void 0:d.classList.add("collapse")}),i),r.a.createElement("aside",{id:a,key:a,className:"drawer ".concat(u," ").concat(m)},r.a.createElement("div",{className:"view","data-test":"".concat(a,"-drawer")},r.a.createElement(Ne.Animated,{animationIn:n,animationOut:c,animationInDuration:o,animationOutDuration:i,isVisible:s},r.a.createElement("section",{ref:t,className:"content","data-test":"drawer-content",style:{height:window.innerHeight+"px"}},function(e,a){return{account:r.a.createElement(Te,null),search:r.a.createElement(He,{show:a}),snapMap:r.a.createElement(Be,null),snap:r.a.createElement(Ge,null),archive:r.a.createElement(Ve,null),chat:r.a.createElement(Ye,null),discover:r.a.createElement(Qe,{drawerContent:t})}[e]}(a,s)))))})))}),$e=(a(142),function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.app})),a=t.drawers,n=t.footerType;return r.a.createElement(r.a.Fragment,null,"none"!==n&&r.a.createElement("footer",{className:fe()("footer",{"light-shadow":ye(a)})},r.a.createElement("div",{className:"left"},r.a.createElement(Oe,{icons:["faCommentAlt","faDot"],iconClasses:[null,"new-msg"],buttonClass:"btn-chat",testId:"btn-chat",label:"Chat",onclick:function(){return e(h({component:"chat",animationIn:"slideInLeft",animationOut:"slideOutLeft",theme:"stripped"}))}})),r.a.createElement("div",{className:"center"},r.a.createElement(Ne.Animated,{animationIn:"zoomIn",animationOut:"zoomOut",animationInDuration:500,animationOutDuration:500,isVisible:"collapsed"===n,animateOnMount:!1},r.a.createElement(Oe,{icon:"faCircle",buttonClass:"btn-capture",testId:"btn-capture-footer",onclick:function(){e(v("full")),e(E())}})),r.a.createElement(Ne.Animated,{animationIn:"zoomIn",animationOut:"zoomOut",animationInDuration:500,animationOutDuration:500,isVisible:"full"===n,animateOnMount:!1},r.a.createElement(Oe,{icons:["faMobile","faMobileAlt"],buttonClass:"btn-archive",testId:"btn-archive",onclick:function(){e(v("collapsed")),e(h({component:"archive",animationIn:"slideInUp",animationOut:"slideOutDown",position:"back"}))}}))),r.a.createElement("div",{className:"right"},r.a.createElement(Oe,{icons:["faMobile","faMobile"],buttonClass:"btn-discover",testId:"btn-discover",label:"Discover",onclick:function(){e(v("collapsed")),e(h({component:"discover",animationIn:"slideInRight",animationOut:"slideOutRight",position:"back"}))}}))))}),Xe=function(e){var t=e.children,a=Object(u.b)();return Object(n.useEffect)((function(){a(B()),a(G()),a(T())}),[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ke,null),r.a.createElement(je,null),r.a.createElement("section",{className:"view"},t),r.a.createElement(Ke,null),r.a.createElement($e,null))},et=(a(143),function(e){var t=e.takePic,a=e.closePic,c=e.videoElem,o=Object(u.b)(),i=Object(n.useRef)(null);Object(n.useEffect)((function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.documentElement,t=.01*window.innerHeight;e.style.setProperty("--vh",t+"px")}()}),[]);var l=function(){var e;return(null===i||void 0===i||null===(e=i.current)||void 0===e?void 0:e.toDataURL("image/png"))||""};Object(n.useEffect)((function(){t&&(!function(){var e,t=window,a=t.innerWidth,n=t.innerHeight,r=null===i||void 0===i||null===(e=i.current)||void 0===e?void 0:e.getContext("2d");r&&(r.canvas.width=a,r.canvas.height=n,r.drawImage(c,0,0,a,n))}(),o(z(l())))}),[t,c,o]);return r.a.createElement("section",{"data-test":"photo-capture",className:fe()("photo-capture",{hide:!t})},r.a.createElement("div",{className:"inner"},r.a.createElement("header",null,r.a.createElement(Oe,{icon:"faTimes",onclick:a,testId:"btn-close"})),r.a.createElement("canvas",{ref:i}),r.a.createElement("aside",null,["faTextHeight","faPen","faStickyNote","faCut","faPaperclip","faCropAlt","faStopwatch"].map((function(e){return r.a.createElement(Oe,{key:e,icon:e})}))),r.a.createElement("footer",null,r.a.createElement("div",{className:"left"},r.a.createElement(Oe,{icon:"faDownload",label:"Save",onclick:function(){var e=l();if(/iPad|iPhone|iPod/.test(S)&&!window.MSStream)window.open(e,"_blank");else{var t=document.createElement("a");t.download="download.png",t.href=e,t.click()}},buttonClass:"btn-download"}),r.a.createElement(Oe,{icon:"faExternalLinkAlt",label:"Story"})),r.a.createElement("div",{className:"right"},r.a.createElement(Oe,{icon:"faPlayCircle",label:"Send To"})))))}),tt=(a(144),["dog","halloween","deform","bees","liberty"]),at={GL_INCOMPATIBLE:"Browser does not support webGL"},nt=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.camera})).cameraMode,a=Object(n.useRef)(null),c=Object(n.useRef)(null),o=Object(n.useState)(!1),i=Object(j.a)(o,2),l=i[0],s=i[1],m=Object(n.useState)(!1),d=Object(j.a)(m,2),f=d[0],p=d[1],h=Object(n.useState)(tt),b=Object(j.a)(h,2),E=b[0],g=b[1],O=Object(n.useState)(""),C=Object(j.a)(O,2),x=C[0],I=C[1],S=Object(n.useState)(!1),M=Object(j.a)(S,2),L=M[0],D=M[1],R=Object(n.useState)(null),T=Object(j.a)(R,2),P=T[0],F=T[1],z=Object(n.useState)(!1),U=Object(j.a)(z,2),H=U[0],J=U[1],B=Object(n.useState)(!0),G=Object(j.a)(B,2),V=G[0],W=G[1],_=Object(n.useCallback)(Object(y.a)(w.a.mark((function e(){var n,r,c,o,i,l,s,u;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=window,c=r.navigator,o=null===(n=document.querySelector("#wrapper"))||void 0===n?void 0:n.offsetWidth,"mediaDevices"in c||(c.mediaDevices={}),"getUserMedia"in c.mediaDevices||(c.mediaDevices.getUserMedia=function(e){var t=c.webkitGetUserMedia||c.mozGetUserMedia;return t?new Promise((function(a,n){return t.call(c,e,a,n)})):Promise.reject(new Error("getUserMedia() is not implemented!"))}),e.next=6,A(c.mediaDevices.getUserMedia({video:{facingMode:t,width:{ideal:o}}}));case 6:i=e.sent,l=Object(j.a)(i,2),s=l[0],u=l[1],!s&&a.current?(a.current.srcObject=u,F(u)):W(!1);case 11:case"end":return e.stop()}}),e)}))),[t]),Y=function(e){var t=E.filter((function(t){return t!==e}));t.splice(2,0,e),g(t)},q=function(){var e=Object(y.a)(w.a.mark((function e(t){var a,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==x){e.next=2;break}return e.abrupt("return");case 2:if(s(!0),Y(t),!L){e.next=13;break}return e.next=7,A(window.JEEFACEFILTERAPI.destroy());case 7:a=e.sent,n=Object(j.a)(a,1),n[0]||I(t),e.next=14;break;case 13:I(t);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=Object(n.useCallback)((function(){I(""),p(!1),D(!1),e(v("full")),_(),window.JEEFACEFILTERAPI.destroy()}),[e,_]);Object(n.useEffect)((function(){_()}),[_]),Object(n.useEffect)((function(){if(x){window.Filters[x].init((function(e){e?(alert(at[e]||"Something went wrong!"),s(!1),Z()):(D(!0),s(!1),null===P||void 0===P||P.getTracks().forEach((function(e){return e.stop()})))}))}}),[x,P,Z]);return r.a.createElement("main",{className:"camera"},l&&r.a.createElement(Me,{message:"Applying Filter",fixed:!0}),!V&&r.a.createElement("div",{className:"not-supported"},r.a.createElement("p",null,r.a.createElement("span",{role:"img","aria-label":"crying emoji"},"\ud83d\ude2d")," ","Either your browser doesn't support the getUserMedia API used by the camera or you declined camera access!")),r.a.createElement(Ne.Animated,{animationIn:"tada",animationOut:"fadeOut",animationInDuration:1e3,animationOutDuration:0,isVisible:!l&&["dog","halloween"].includes(x),animateOnMount:!1},r.a.createElement("div",{className:"open-mouth"},r.a.createElement("strong",null,"Open Mouth"),r.a.createElement("span",{role:"img","aria-label":"tongue emoji"},"\ud83d\udc45"))),r.a.createElement("video",{ref:a,muted:!0,playsInline:!0,autoPlay:!0,className:fe()("video-stream",{hide:L||H})}),a.current&&r.a.createElement(et,{takePic:H,closePic:function(){return J(!1)},videoElem:a.current}),r.a.createElement("section",{className:"controls"},r.a.createElement(Oe,{icon:"faCircle",buttonClass:"btn-capture",testId:"btn-capture-main",onclick:function(){V&&(J(!0),c.current&&N("cameraShutter",c.current))}}),!f&&r.a.createElement(Oe,{icon:"faLaugh",buttonClass:"btn-filters",testId:"btn-filters",onclick:function(){V&&(p(!0),e(v("none")),k((function(){return q(E[2])}),100))}}),r.a.createElement(Ne.Animated,{animationIn:"zoomIn",animationOut:"zoomOut",animationInDuration:100,animationOutDuration:100,isVisible:f,animateOnMount:!1},r.a.createElement("div",{className:"filters","data-test":"filters"},E.map((function(e){return r.a.createElement(Oe,{key:e,image:"./images/filter-".concat(e,".svg"),buttonClass:"filter-".concat(e),onclick:function(){return q(e)}})}))),r.a.createElement("div",{className:"filter-actions"},r.a.createElement(Oe,{icon:"faMagic",round:!0}),r.a.createElement(Oe,{icon:"faQrcode",round:!0}),r.a.createElement(Oe,{icon:"faTimesCircle",buttonClass:"btn-close",onclick:Z}),r.a.createElement(Oe,{icon:"faLaugh",round:!0}),r.a.createElement(Oe,{icon:"faSearch",round:!0})))),r.a.createElement("audio",{ref:c,className:"app-sound"}))},rt=(a(145),function(){return r.a.createElement("main",{className:"not-found"},r.a.createElement("div",{className:"message"},r.a.createElement("h1",null,"Well, this is awkward!"),r.a.createElement("p",null,"We couldn't find what you were looking for"),r.a.createElement(i.b,{to:"/"},r.a.createElement(ge,{icon:"faSnapchatSquare"}),r.a.createElement("span",null,"Go Home"))))}),ct=(a(147),a(148),a(149),Object(s.a)({reducer:{app:g,camera:H,user:Y,snapMap:$,snap:ce,chat:ue}})),ot=function(){return r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{store:ct},r.a.createElement(i.a,null,r.a.createElement(Xe,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/",exact:!0,component:nt}),r.a.createElement(l.a,{path:"/snapchat-clone",exact:!0,component:nt}),r.a.createElement(l.a,{component:rt}))))))};o.a.render(r.a.createElement(ot,null),document.getElementById("root"))},57:function(e,t,a){e.exports=a(150)},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){}},[[57,1,2]]]);
//# sourceMappingURL=main.e5582ab4.chunk.js.map
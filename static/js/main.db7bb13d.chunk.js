(this["webpackJsonpsnapchat-clone"]=this["webpackJsonpsnapchat-clone"]||[]).push([[0],{123:function(e,t,a){},124:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){"use strict";a.r(t),a.d(t,"store",(function(){return ct}));var n=a(0),r=a.n(n),c=a(30),o=a.n(c),i=a(32),l=a(9),s=a(10),u=a(2),m=a(12),d=a(27),f=Object(s.c)({name:"app",initialState:{drawers:[],footerType:"full"},reducers:{showDrawer:{reducer:function(e,t){var a=t.payload,n=e.drawers.filter((function(e){return e.component!==a.component}));e.drawers=[].concat(Object(d.a)(n),[a])},prepare:function(e){return{payload:Object(m.a)(Object(m.a)({},{animationIn:"slideInUp",animationOut:"slideOutDown",animationInDuration:300,animationOutDuration:300,theme:"light",position:"front",show:!0}),e)}}},hideDrawer:function(e,t){var a=t.payload;e.drawers=e.drawers.map((function(e){return e.component===a?Object(m.a)(Object(m.a)({},e),{},{show:!1}):e}))},hideAllDrawers:function(e){var t,a=e.drawers.filter((function(e){return e.show})),n=a[a.length-1].component;t=1===a.length?e.drawers.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{show:!1})})):e.drawers.map((function(e){return e.component===n?Object(m.a)(Object(m.a)({},e),{},{show:!1}):Object(m.a)(Object(m.a)({},e),{},{show:!1,animationOutDuration:0})})),e.drawers=t},setFooterType:function(e,t){e.footerType=t.payload}}}),p=f.actions,h=p.showDrawer,b=p.hideDrawer,E=p.hideAllDrawers,g=p.setFooterType,v=f.reducer,O=a(4),w=a.n(O),j=a(3),y=a(8),k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return setTimeout(e,t)},N=function(){var e=Object(y.a)(w.a.mark((function e(t,a){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={newAppMessage:"./audio/blip.mp3",cameraShutter:"./audio/shutter.mp3"},a.src=n[t],e.prev=2,e.next=5,a.play();case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,a){return e.apply(this,arguments)}}(),C=navigator,I=C.language,S=void 0===I?"en-US":I,M=C.userAgent,x={baseURL:"./api",get:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return x.respond("get",e,null,t)},post:function(e,t){return x.respond("post",e,t)},put:function(e,t){return x.respond("put",e,t)},patch:function(e,t){return x.respond("patch",e,t)},delete:function(e){return x.respond("delete",e)},respond:function(){var e=Object(y.a)(w.a.mark((function e(t,a,n,r){var c,o,i,l;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r?a:x.baseURL+a,o=n?{headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(n)}:{},e.prev=2,e.next=5,fetch(c,Object(m.a)({method:t},o));case 5:return i=e.sent,e.next=8,i.json();case 8:return l=e.sent,e.abrupt("return",[null,l]);case 12:return e.prev=12,e.t0=e.catch(2),e.abrupt("return",[e.t0]);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,a,n,r){return e.apply(this,arguments)}}()},A=function(e){return e.then((function(e){return e instanceof Error?[e]:[null,e]})).catch((function(e){return[e]}))},D=function(e){return new Promise((function(t){return setTimeout(t,e)}))},L={loading:!1,error:!1,data:[]},T={cameraMode:"user",photoTaken:!1,photos:L},R=Object(s.b)("photos/getPhotos",Object(y.a)(w.a.mark((function e(){var t,a,n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("/photos.json");case 2:if(t=e.sent,a=Object(j.a)(t,2),n=a[0],r=a[1],n){e.next=8;break}return e.abrupt("return",r.photos);case 8:case"end":return e.stop()}}),e)})))),P=Object(s.c)({name:"photos",initialState:T,reducers:{setPhoto:{reducer:function(e,t){var a=t.payload,n=a.month,r=a.year,c=a.dataURL;e.photoTaken?e.photos[0].data.images.unshift(t.payload.dataURL):(e.photoTaken=!0,e.photos.data.unshift({month:n,year:r,images:[c]}))},prepare:function(e){var t=new Date;return{payload:{dataURL:e,month:t.toLocaleString("default",{month:"long"}),year:t.getFullYear()}}}},toggleCameraMode:function(e){e.cameraMode="user"===e.cameraMode?"environment":"user"}},extraReducers:function(e){e.addCase(R.pending,(function(e){e.photos.loading=!0})),e.addCase(R.fulfilled,(function(e,t){var a=e.photos,n=t.payload;a.loading=!1,n?a.data=n:a.error=!0})),e.addCase(R.rejected,(function(e){var t=e.photos;t.loading=!1,t.error=!0}))}}),F=P.actions,z=F.setPhoto,U=F.toggleCameraMode,H=P.reducer,J={session:{id:"",username:"",avatar:"",gender:"other",age:0,fullName:""},geolocation:{country:"",state:"",city:"",zip:"",latitude:0,longitude:0},friends:L},B=Object(s.b)("user/sessionFetched",Object(y.a)(w.a.mark((function e(){var t,a,n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("/session.json");case 2:if(t=e.sent,a=Object(j.a)(t,2),n=a[0],r=a[1],!n){e.next=8;break}return e.abrupt("return",!1);case 8:return e.abrupt("return",r.session);case 9:case"end":return e.stop()}}),e)})))),G=Object(s.b)("user/friendsFetched",Object(y.a)(w.a.mark((function e(){var t,a,n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("/friends.json");case 2:if(t=e.sent,a=Object(j.a)(t,2),n=a[0],r=a[1],!n){e.next=8;break}return e.abrupt("return",!1);case 8:return e.abrupt("return",r.friends);case 9:case"end":return e.stop()}}),e)})))),V=Object(s.b)("user/geoLocationFetched",Object(y.a)(w.a.mark((function e(){var t,a,n,r,c,o,i,l,s,u;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("https://geolocation-db.com/json/",!0);case 2:if(t=e.sent,a=Object(j.a)(t,2),n=a[0],r=a[1],!n){e.next=8;break}return e.abrupt("return",!1);case 8:return c=r.country_name,o=r.state,i=r.city,l=r.postal,s=r.latitude,u=r.longitude,e.abrupt("return",{country:c,state:o,city:i,zip:l,latitude:s,longitude:u});case 10:case"end":return e.stop()}}),e)})))),W=Object(s.c)({name:"user",initialState:J,reducers:{setLatLon:function(e,t){var a=e.geolocation,n=t.payload,r=n.latitude,c=n.longitude;a.latitude=r,a.longitude=c}},extraReducers:function(e){e.addCase(B.fulfilled,(function(e,t){var a=t.payload;a&&(e.session=a)})),e.addCase(V.fulfilled,(function(e,t){var a=t.payload;a&&(e.geolocation=a)})),e.addCase(G.pending,(function(e){e.friends.loading=!0})),e.addCase(G.fulfilled,(function(e,t){var a=e.friends,n=t.payload;a.loading=!1,n?a.data=n:a.error=!0})),e.addCase(G.rejected,(function(e){var t=e.friends;t.loading=!1,t.error=!0}))}}),Y=W.actions.setLatLon,_=W.reducer,q={sn:"snow",sl:"sleet",h:"hail",t:"thunderstorm",s:"showers",c:"clear",hr:"heavy-rain",lr:"light-rain",hc:"heavy-cloud",lc:"light-cloud"},Z={snow:"faSnowflake",sleet:"faIcicles",hail:"faCloudMeatball",thunderstorm:"faPooStorm",showers:"faCloudShowersHeavy",clear:"faSun","heavy-rain":"faCloudShowersHeavy","light-rain":"faCloudRain","heavy-cloud":"faCloud","light-cloud":"faCloudSun"},Q=Object(s.b)("snapMap/snapsFetched",function(){var e=Object(y.a)(w.a.mark((function e(t){var a,n,r,c,o,i,l,s,u,d;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.lat,n=t.lon,r=t.city,c=t.state,e.next=3,x.get("/snaps.json?geo=".concat(a,",").concat(n));case 3:if(o=e.sent,i=Object(j.a)(o,2),l=i[0],s=i[1],!l){e.next=9;break}return e.abrupt("return",!1);case 9:return u=[{lat:a+.006,lon:n-.006},{lat:a+.009,lon:n+.005},{lat:a+.006,lon:n-.001},{lat:a-.005,lon:n-.002},{lat:a-.001,lon:n-.005},{lat:a+.005,lon:n- -.006},{lat:a,lon:n+.004}],d=s.snaps.map((function(e,t){return Object(m.a)(Object(m.a)({},e),{},{location:r&&c?"".concat(r,", ").concat(c):null,lat:u[t].lat,lon:u[t].lon})})),e.abrupt("return",d);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),K=Object(s.b)("snapMap/weatherFetched",function(){var e=Object(y.a)(w.a.mark((function e(t){var a,n,r,c,o,i,l,s,u,m,d,f,p,h,b,E;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.lat,c=t.lon,o="https://api.allorigins.win/get?url=".concat(encodeURIComponent("https://www.metaweather.com/api/location")),i={temperature:75,condition:"clear"},e.next=5,x.get("".concat(o,"/search/?lattlong=").concat(r,",").concat(c),!0);case 5:if(l=e.sent,s=Object(j.a)(l,2),u=s[0],m=s[1],!u){e.next=11;break}return e.abrupt("return",!1);case 11:return d=null===(a=JSON.parse(m.contents)[0])||void 0===a?void 0:a.woeid,e.next=14,x.get("".concat(o,"/").concat(d,"/"),!0);case 14:if(f=e.sent,p=Object(j.a)(f,2),u=p[0],m=p[1],!u){e.next=20;break}return e.abrupt("return",!1);case 20:return h=JSON.parse(null===(n=m)||void 0===n?void 0:n.contents).consolidated_weather[0],b=h.the_temp,E=h.weather_state_abbr,i={temperature:(g=b,Math.round(1.8*g+32)),condition:q[E]},e.abrupt("return",i);case 23:case"end":return e.stop()}var g}),e)})));return function(t){return e.apply(this,arguments)}}()),$=Object(s.c)({name:"snapMap",initialState:{snaps:[],weather:{temperature:0,condition:""}},reducers:{},extraReducers:function(e){e.addCase(K.fulfilled,(function(e,t){var a=t.payload;a&&(e.weather=a)})),e.addCase(Q.fulfilled,(function(e,t){var a=t.payload;a&&(e.snaps=a)}))}}).reducer,X={type:"",url:"",location:"",lat:0,lon:0,time:0,caption:"",shareable:!1},ee=X,te=Object(s.c)({name:"snap",initialState:ee,reducers:{addSnap:function(e,t){return t.payload},removeSnap:function(e){return X}}}),ae=te.actions,ne=ae.addSnap,re=ae.removeSnap,ce=te.reducer,oe=a(152),ie={thread:"Lisa",messages:L},le=Object(s.b)("chat/messagesReceived",function(){var e=Object(y.a)(w.a.mark((function e(t){var a,n,r,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("/messages.json?thread=".concat(t));case 2:if(a=e.sent,n=Object(j.a)(a,2),r=n[0],c=n[1],!r){e.next=8;break}return e.abrupt("return",!1);case 8:return e.abrupt("return",c.messages);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),se=Object(s.c)({name:"chat",initialState:ie,reducers:{postMessage:{reducer:function(e,t){var a=t.payload,n=a.id,r=a.author,c=a.message,o=a.time;e.messages.data.push({id:n,author:r,message:c,time:o})},prepare:function(e,t){return{payload:{id:Object(oe.a)(),author:e,message:t,time:JSON.stringify(new Date)}}}}},extraReducers:function(e){e.addCase(le.pending,(function(e){e.messages.loading=!0})),e.addCase(le.fulfilled,(function(e,t){var a=e.messages,n=t.payload;a.loading=!1,n?a.data=n:a.error=!0})),e.addCase(le.rejected,(function(e){var t=e.messages;t.loading=!1,t.error=!0}))}}),ue=se.actions.postMessage,me=se.reducer,de=a(11),fe=a(6),pe=a.n(fe),he=a(55),be=a(39),Ee=a(56),ge=a(1),ve=(a(68),{faSnapchatSquare:be.b,faGithub:be.a,faCircle:Ee.a,faCamera:ge.e,faUserPlus:ge.bb,faListAlt:ge.z,faGrinBeam:ge.w,faAngleRight:ge.c,faCompass:ge.n,faUserCircle:ge.ab,faSearch:ge.O,faRetweet:ge.M,faAngleDown:ge.a,faLocationArrow:ge.A,faSignal:ge.Q,faBatteryHalf:ge.d,faCommentAlt:ge.m,faMobile:ge.D,faMobileAlt:ge.E,faDot:ge.f,faLaugh:ge.y,faSmileWink:ge.R,faEllipsisV:ge.t,faEllipsisH:ge.s,faCog:ge.l,faTimesCircle:ge.Z,faTimes:ge.Y,faAngleLeft:ge.b,faSearchPlus:ge.P,faPaw:ge.G,faSpider:ge.T,faWater:ge.db,faPhoneAlt:ge.I,faVideo:ge.cb,faRocket:ge.N,faMicrophone:ge.C,faDownload:ge.q,faTextHeight:ge.X,faPen:ge.H,faStickyNote:ge.U,faCut:ge.p,faPaperclip:ge.F,faCropAlt:ge.o,faStopwatch:ge.V,faExternalLinkAlt:ge.v,faPlayCircle:ge.J,faEdit:ge.r,faMagic:ge.B,faQrcode:ge.L,faSnowflake:ge.S,faIcicles:ge.x,faCloudMeatball:ge.h,faPooStorm:ge.K,faCloudShowersHeavy:ge.j,faCloudRain:ge.i,faCloud:ge.g,faCloudSun:ge.k,faSun:ge.W,faExclamationCircle:ge.u}),Oe=function(e){var t=e.icon,a=e.onClick,n=e.className,c=void 0===n?"":n;return t?r.a.createElement(he.a,{icon:ve[t],onClick:a,className:pe()("icon",Object(de.a)({},c,!0))}):null},we=(a(69),function(e){var t,a=e.image,n=e.icon,c=e.icons,o=e.iconClass,i=void 0===o?"":o,l=e.iconClasses,s=void 0===l?[]:l,u=e.buttonClass,m=void 0===u?"":u,d=e.round,f=e.plain,p=e.purple,h=e.label,b=e.onclick,E=e.testId;return r.a.createElement("button",{type:"button",onClick:b,className:pe()("btn",(t={},Object(de.a)(t,m,!0),Object(de.a)(t,"round",d),Object(de.a)(t,"plain",f),Object(de.a)(t,"purple",p),t)),"data-test":E},a?r.a.createElement("img",{src:a,alt:""}):c?c.map((function(e,t){return r.a.createElement(Oe,{key:e+t,icon:e,className:pe()(Object(de.a)({},s[t],s[t]))})})):n?r.a.createElement(Oe,{icon:n,className:pe()(Object(de.a)({},i,!0))}):null,h&&r.a.createElement("strong",null,h))}),je=(a(70),function(e){var t=e.placeholder,a=e.value,c=e.leftIcon,o=e.rightIcon,i=e.onClick,l=e.onFocus,s=e.onBlur,u=e.onChange,m=e.onEnter,d=e.focus,f=e.spellCheck,p=e.animate,h=e.dark,b=Object(n.useRef)(null),E=Object(n.useState)(!1),g=Object(j.a)(E,2),v=g[0],O=g[1];Object(n.useEffect)((function(){p&&O(!0),k((function(){var e;d&&(null===b||void 0===b||null===(e=b.current)||void 0===e||e.focus())}))}),[p,d]);var w=!!i;return r.a.createElement("div",{className:pe()("input",{animate:p,full:v,dark:h}),"data-test":"input"},w&&r.a.createElement("div",{className:"disabled-overlay",onClick:i}),c&&r.a.createElement(Oe,{icon:c,className:"left-icon"}),r.a.createElement("input",{type:"text",ref:b,placeholder:t,value:a,onClick:i,onFocus:l,onBlur:s,onChange:u,onKeyPress:function(e){var t=e.key;return m&&"Enter"===t&&m()},disabled:w,spellCheck:f||!1,className:pe()({"has-left-icon":c}),"data-test":"field"}),o&&r.a.createElement(Oe,{icon:o,className:"right-icon"}))}),ye=(a(71),function(e){var t=e.insideDrawer,a=Object(u.b)(),n=Object(u.c)((function(e){return e.user.session.avatar})),c=n?{image:n}:{icon:"faUserCircle"};return r.a.createElement("header",{className:"header","data-test":"header"},r.a.createElement(we,Object.assign({},c,{onclick:function(){return a(h({component:"account"}))},buttonClass:"btn-user",testId:"btn-user"})),r.a.createElement(je,{placeholder:"Search",leftIcon:"faSearch",rightIcon:"faUserPlus",dark:t,onClick:function(){return a(h({component:"search",animationIn:"fadeIn",animationOut:"fadeOut",animationInDuration:200,animationOutDuration:200}))}}),r.a.createElement("div",{className:"right"},t?r.a.createElement(Oe,{icon:"faEllipsisH"}):r.a.createElement(we,{icon:"faRetweet",buttonClass:"btn-flip-camera",onclick:function(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(M)?a(U()):alert("You need a front facing camera for this, try it on your phone!")}})))}),ke=function(e){return e.some((function(e){return e.show}))},Ne=(a(72),function(){var e=Object(u.c)((function(e){return e.app.drawers})),t=Object(n.useState)(""),a=Object(j.a)(t,2),c=a[0],o=a[1],i=function(){var e=(new Date).toLocaleTimeString(S,{hour:"numeric",minute:"2-digit"}).replace(/AM|PM/,"");o(e)};return Object(n.useEffect)((function(){i(),setInterval(i,1e3)}),[]),r.a.createElement("div",{className:pe()("toolbar",{dark:ke(e)})},r.a.createElement("div",{className:"left"},r.a.createElement("time",null,c),r.a.createElement(Oe,{icon:"faLocationArrow"})),r.a.createElement("div",{className:"right"},r.a.createElement(Oe,{icon:"faSignal",className:"icon-signal"}),r.a.createElement(Oe,{icon:"faBatteryHalf"})))}),Ce=a(18),Ie=(a(123),function(e){var t=e.header,a=e.className,n=void 0===a?"":a,c=e.transparent,o=e.children;return r.a.createElement("section",{className:pe()("widget",Object(de.a)({},n,!0))},r.a.createElement("header",null,t),r.a.createElement("div",{className:pe()("inner-content",{transparent:c})},o))}),Se=(a(124),function(e){var t=e.leftIcon,a=e.rightIcon,n=e.label,c=e.straightEdge;return r.a.createElement("article",{className:pe()("pod","action-item",{"straight-edge":c})},r.a.createElement(Oe,{icon:t,className:"ico-left"}),n,r.a.createElement(we,{icon:a,buttonClass:"ico-right"}))}),Me=a(19),xe=a.n(Me),Ae=(a(125),function(e){var t=e.fixed,a=e.nobg,n=e.message;return r.a.createElement("div",{className:pe()("loading",{fixed:t,message:n,nobg:a})},r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"sk-cube-grid"},new Array(9).fill(null).map((function(e,t){return r.a.createElement("div",{key:"cube-".concat(t),className:"sk-cube sk-cube"+t})}))),n&&r.a.createElement("span",null,n)))}),De=(a(126),"pk.eyJ1IjoidGtwb3A3NzciLCJhIjoiY2tjZWNhcmRzMDBtZTJ6bnExbG4ya2ludiJ9.J2MYqCdGMZENpyzI0blWPg"),Le=!!De.length;Le&&(xe.a.accessToken=De);var Te=function(){var e=Object(u.b)(),t=Object(n.useRef)(null),a=Object(n.useState)(!0),c=Object(j.a)(a,2),o=c[0],i=c[1];Object(n.useEffect)((function(){Le&&Object(y.a)(w.a.mark((function t(){var a,n,r,c,o,i;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(V());case 2:(a=t.sent).payload?(n=a.payload,r=n.latitude,c=n.longitude,l(r,c)):(o=function(t,a){l(t,a),e(Y({latitude:t,longitude:a}))},i=function(){return o(40.75491,-73.994102)},"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(e){var t=e.coords;o(t.latitude,t.longitude)}),(function(e){i()}),{maximumAge:1/0,timeout:5e3,enableHighAccuracy:!0}):i());case 4:case"end":return t.stop()}}),t)})))()}),[e]);var l=function(e,a){var n=new xe.a.Map({container:t.current,style:"mapbox://styles/mapbox/streets-v11",center:[a,e],zoom:13,interactive:!1}).on("load",(function(){i(!1);var t=document.createElement("div");t.className="self-marker",new xe.a.Marker(t).setLngLat([a,e]).addTo(n)}))};return r.a.createElement("div",{className:"preview-map","data-test":"preview-map",onClick:function(){return Le&&e(h({component:"snapMap",animationIn:"fadeIn",animationOut:"fadeOut",animationInDuration:0,animationOutDuration:0,theme:"stripped"}))}},Le?o?r.a.createElement(Ae,null):null:r.a.createElement("div",{className:"api-key-msg"},r.a.createElement("p",null,r.a.createElement("span",{role:"img","aria-label":"earth emoji"},"\ud83c\udf0e")," ","Get a free mapboxgl"," ",r.a.createElement("a",{href:"https://docs.mapbox.com/help/glossary/access-token/",target:"_blank",rel:"noopener noreferrer"},"API key here"),", then rename the ",r.a.createElement("code",null,".env.sample")," file at the root of the project to just ",r.a.createElement("code",null,".env")," and place the key inside, finally run",r.a.createElement("code",null,"npm start")," again to view the snap map features!")),Le&&r.a.createElement("div",{className:"map",ref:t}))},Re=(a(127),(new Date).toLocaleDateString(S,{year:"numeric",month:"long",day:"numeric"})),Pe=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.user.session.username}));return r.a.createElement("main",{className:"account"},r.a.createElement("header",null,r.a.createElement(we,{icon:"faAngleDown",onclick:function(){return e(b("account"))},buttonClass:"btn-close"}),r.a.createElement(Oe,{icon:"faCog",className:"ico-gear"})),r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:"./images/logo.svg",alt:""}),r.a.createElement("strong",null,t)),r.a.createElement(Ie,{header:"Stories",transparent:!0},r.a.createElement(Se,{leftIcon:"faCamera",rightIcon:"faEllipsisV",label:"Add to My Story"}),r.a.createElement(Se,{leftIcon:"faCamera",rightIcon:"faEllipsisV",label:"Add to Our Story"})),r.a.createElement(Ie,{header:"Friends",transparent:!0},r.a.createElement(Se,{leftIcon:"faUserPlus",rightIcon:"faAngleRight",label:"Add Friends"}),r.a.createElement(Se,{leftIcon:"faListAlt",rightIcon:"faAngleRight",label:"My Friends"})),r.a.createElement(Ie,{header:"Bitmoji",transparent:!0},r.a.createElement(Se,{leftIcon:"faGrinBeam",rightIcon:"faAngleRight",label:"Create Bitmoji"})),r.a.createElement(Ie,{header:"Snap Map"},r.a.createElement(Te,null),r.a.createElement(Se,{leftIcon:"faCompass",rightIcon:"faAngleRight",label:"Set a Status",straightEdge:!0})),r.a.createElement("footer",null,r.a.createElement("p",null,r.a.createElement("a",{href:"https://github.com/TowhidKashem/snapchat-clone",target:"_blank",rel:"noopener noreferrer",title:"Github Repo"},r.a.createElement(Oe,{icon:"faGithub"})),"Joined SnapChat on ",Re)))},Fe=(a(128),{sm:45,md:100,lg:150}),ze=function(e){var t=e.src,a=e.size,n=void 0===a?"md":a;return r.a.createElement("img",{src:t,className:"avatar",alt:"",width:Fe[n]})},Ue=(a(129),function(e){var t=e.user,a=t.username,n=t.fullName,c=t.avatar;return r.a.createElement("article",{className:"pod user"},r.a.createElement(ze,{src:c,size:"sm"}),r.a.createElement("div",{className:"meta"},r.a.createElement("header",null,n),r.a.createElement("span",null,a)))}),He=(a(130),function(e){var t=e.message,a=void 0===t?"Oops couldn't load content":t;return r.a.createElement("div",{className:"error"},r.a.createElement("p",null,r.a.createElement(Oe,{icon:"faExclamationCircle"})," ",a))}),Je=(a(131),function(e){var t=e.show,a=Object(u.b)(),c=Object(u.c)((function(e){return e.user.friends})),o=c.loading,i=c.error,l=c.data,s=Object(n.useState)(""),m=Object(j.a)(s,2),d=m[0],f=m[1];Object(n.useEffect)((function(){t||f("")}),[t]);var p=new RegExp(d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"),h=d?l.filter((function(e){var t=e.fullName,a=e.username;return t.match(p)||a.match(p)})):l,E=(null===h||void 0===h?void 0:h.length)>0;return r.a.createElement("main",{className:"search"},r.a.createElement("header",null,r.a.createElement(je,{placeholder:"Search",leftIcon:"faSearch",value:d,onChange:function(e){return f(e.currentTarget.value)},focus:t,animate:!0,dark:!0}),r.a.createElement(we,{label:"Cancel",plain:!0,onclick:function(){return a(b("search"))},testId:"btn-cancel"})),r.a.createElement("section",null,o?r.a.createElement(Ae,{nobg:!0}):i?r.a.createElement(He,null):r.a.createElement(Ce.Animated,{animationIn:"slideInUp",animationOut:"slideOutDown",animationInDuration:250,animationOutDuration:0,isVisible:t},r.a.createElement("div",{className:"results"},E&&r.a.createElement(Ie,{header:"Quick Add"},h.map((function(e){return r.a.createElement(Ue,{key:e.id,user:e})})))),d&&!E&&r.a.createElement("p",{className:"no-results"},r.a.createElement("span",{role:"img","aria-label":"poop emoji"},"\ud83d\udca9")," ","No results"))))}),Be=(a(132),function(){var e=Object(u.b)(),t=Object(u.c)((function(e){var t=e.user,a=e.snapMap;return{city:t.geolocation.city,weather:a.weather}})),a=t.city,n=t.weather,c=n.temperature,o=n.condition;return r.a.createElement("header",{className:"weather-header"},r.a.createElement("div",{className:"left"},r.a.createElement(we,{icon:"faTimes",round:!0,onclick:function(){return e(b("snapMap"))},buttonClass:"btn-close",testId:"btn-close"}),r.a.createElement(we,{icon:"faSearch",round:!0})),r.a.createElement("div",{className:"center"},r.a.createElement("article",{className:"weather"},r.a.createElement("header",null,a),r.a.createElement("div",{className:"condition"},r.a.createElement(Oe,{icon:Z[o]}),r.a.createElement("span",{className:"temperature"},c,"\xb0F")))),r.a.createElement("div",{className:"right"},r.a.createElement(we,{icon:"faCog",round:!0})))});a(133);xe.a.accessToken="pk.eyJ1IjoidGtwb3A3NzciLCJhIjoiY2tjZWNhcmRzMDBtZTJ6bnExbG4ya2ludiJ9.J2MYqCdGMZENpyzI0blWPg";var Ge=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){var t=e.user,a=e.snapMap;return{geolocation:t.geolocation,snaps:a.snaps}})),a=t.geolocation,c=t.snaps,o=Object(n.useRef)(null),i=Object(n.useState)(!0),l=Object(j.a)(i,2),s=l[0],m=l[1],d=Object(n.useState)(null),f=Object(j.a)(d,2),p=f[0],b=f[1],E=a.latitude,g=a.longitude,v=a.city,O=a.state;return Object(n.useEffect)((function(){e(Q({lat:E,lon:g,city:v,state:O})),e(K({lat:E,lon:g})),b(new xe.a.Map({container:o.current,style:"mapbox://styles/mapbox/streets-v11",center:[g,E],zoom:13}).on("load",(function(){return m(!1)})))}),[e,E,g,v,O]),Object(n.useEffect)((function(){if(p){!function(){var e=document.createElement("div");e.className="self-marker",new xe.a.Marker(e).setLngLat([g,E]).addTo(p),setTimeout((function(){e.classList.add("zoomed-in"),new xe.a.Popup({closeOnClick:!1}).setLngLat([g,E]).setHTML("<header>Me</header>\n              <p>Not Sharing Location</p>").addTo(p)}),2300)}(),setTimeout((function(){return p.flyTo({zoom:14})}),2e3)}}),[p,E,g]),Object(n.useEffect)((function(){c.map((function(t){return function(t){var a=document.createElement("div");a.className="marker",a.setAttribute("data-test","marker"),a.onclick=function(a){a.target.classList.add("active"),k((function(){e(ne(t)),e(h({component:"snap",animationIn:"zoomIn",animationOut:"zoomOut",theme:"dark"}))}),900),k((function(){return a.target.classList.remove("active")}),1e3)},new xe.a.Marker(a).setLngLat([t.lon,t.lat]).addTo(p)}(t)}))}),[c,p,e]),r.a.createElement("div",{className:"snap-map"},r.a.createElement("div",{className:"inner"},s&&r.a.createElement(Ae,null),r.a.createElement(Be,null),r.a.createElement("div",{ref:o,className:"content"})))},Ve=(a(134),function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.snap})),a=Object(n.useRef)(null),c=t.location,o=t.time,i=t.type,l=t.url,s=t.caption,m=t.shareable;Object(n.useEffect)((function(){"video"===i&&a.current&&(a.current.load(),a.current.play())}),[t,i]);var d=function(){e(b("snap")),k((function(){return e(re())}))};return r.a.createElement("main",{className:"snap",onClick:d,"data-test":"snap"},r.a.createElement("header",{className:pe()({metadata:c||o})},(c||o)&&r.a.createElement("div",{className:"left"},c&&r.a.createElement("span",{"data-test":"location"},c),o&&r.a.createElement("time",{"data-test":"time"},function(e){var t=Date.now()-e;return t<6e4?Math.floor(t/1e3)+" seconds ago":t<36e5?Math.floor(t/6e4)+" minutes ago":t<864e5?Math.floor(t/36e5)+" hours ago":t<2592e6?Math.floor(t/864e5)+" days ago":t<31536e6?Math.floor(t/2592e6)+" months ago":Math.floor(t/31536e6)+" years ago"}(o))),r.a.createElement("div",{className:"right"},r.a.createElement(we,{icon:"faEllipsisV"}))),"video"===i?r.a.createElement("div",{className:"video-container"},r.a.createElement("video",{ref:a,playsInline:!0,onEnded:d,"data-test":"video"},r.a.createElement("source",{src:l,type:"video/mp4"}))):r.a.createElement("div",{className:"image-container","data-test":"image"},s&&r.a.createElement("div",{className:"caption","data-test":"caption"},s),r.a.createElement("img",{src:l,alt:""})),m&&r.a.createElement("footer",null,r.a.createElement(we,{icon:"faLocationArrow"})))}),We=(a(135),function(){var e=Object(u.b)(),t=Object(u.c)((function(e){var t=e.camera;return{photos:t.photos,photoTaken:t.photoTaken}})),a=t.photos,n=t.photoTaken;return r.a.createElement("main",{className:"archive"},r.a.createElement(ye,{insideDrawer:!0}),a.loading?r.a.createElement(Ae,{nobg:!0}):a.error?r.a.createElement(He,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"view-options"},r.a.createElement(we,{label:"Snaps",buttonClass:"active"}),r.a.createElement(we,{label:"Camera Roll"})),!n&&r.a.createElement("section",{className:"message","data-test":"placeholder-msg"},r.a.createElement("p",null,"Take a photo and it will appear here!")),a.data.map((function(t){var a=t.month,n=t.year,c=t.images;return r.a.createElement("section",{key:a,className:"month","data-test":"month"},r.a.createElement("h3",null,a," ",n),c.map((function(t,a){return r.a.createElement("img",{key:t+a,src:t,width:100,alt:"",onClick:function(){return function(t){e(ne({type:"photo",url:t,shareable:!0})),e(h({component:"snap",animationIn:"zoomIn",animationOut:"zoomOut",theme:"dark"}))}(t)},"data-test":"snap-image"})})))}))))}),Ye=["Oh wow I can't believe it!","Hahaha you're so right!!","No way, when?!! \ud83d\ude31","OMG I totally agree!","Umm I'm not so sure about that one \ud83e\udd28","Wait, you are actually being serious rn?","Hahahahaha you're too much \ud83d\ude02\ud83d\ude02\ud83d\ude02","Did you watch the new show last night?","\ud83e\udd21"],_e=(a(136),function(e){var t=e.icons;return r.a.createElement("div",{className:"pill"},t.map((function(e){return r.a.createElement(we,{key:e,icon:e})})))}),qe=(a(137),function(){var e=Object(u.b)(),t=Object(u.c)((function(e){var t=e.user,a=e.chat;return{username:t.session.username,thread:a.thread,messages:a.messages}})),a=t.username,c=t.thread,o=t.messages,i=Object(n.useRef)(null),l=Object(n.useRef)(null),s=Object(n.useState)(""),m=Object(j.a)(s,2),d=m[0],f=m[1],p=Object(n.useState)(!1),h=Object(j.a)(p,2),E=h[0],g=h[1];Object(n.useLayoutEffect)((function(){i.current&&(i.current.scrollTop=i.current.scrollHeight)}),[o]);var v=Object(n.useCallback)(function(){var t=Object(y.a)(w.a.mark((function t(a){var n,r,o;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a?[1e3,0]:[800,500,1e3,700,600,0],r=0;case 2:if(!(r<n.length)){t.next=10;break}return g((function(e){return!e})),t.next=6,D(n[r]);case 6:return t.abrupt("continue",7);case 7:r++,t.next=2;break;case 10:o=a?"Soooo, how was it!?":(i=Ye)[Math.floor(Math.random()*i.length)],e(ue(c,o)),l.current&&N("newAppMessage",l.current);case 13:case"end":return t.stop()}var i}),t)})));return function(e){return t.apply(this,arguments)}}(),[c,e]);Object(n.useEffect)((function(){e(le(c)),v(!0)}),[c,v,e]);var O=function(){d.length&&(e(ue(a,d)),f(""),setTimeout(v,1e3))};return r.a.createElement("main",{className:"chat"},r.a.createElement("header",null,r.a.createElement(ze,{src:"./images/bitmoji-other.png"}),r.a.createElement("h2",null,c),r.a.createElement("div",{className:"right"},r.a.createElement(_e,{icons:["faPhoneAlt","faVideo"]}),r.a.createElement(we,{icon:"faAngleRight",onclick:function(){return e(b("chat"))},buttonClass:"btn-arrow",testId:"btn-close-chat"}))),r.a.createElement("section",{ref:i,className:"messages"},o.loading?r.a.createElement(Ae,{nobg:!0}):o.error?r.a.createElement(He,null):o.data.map((function(e){var t=e.author,n=e.message,c=e.time;return r.a.createElement("article",{key:c,className:pe()("message",{other:t!==a}),"data-test":"message"},r.a.createElement("header",null,t!==a?t:"Me"),r.a.createElement("blockquote",null,n))}))),r.a.createElement("footer",null,r.a.createElement("div",{className:pe()("gravatar",{typing:E})},r.a.createElement(ze,{src:"./images/bitmoji-other.png"})),r.a.createElement("div",{className:"inner-content"},r.a.createElement(we,{icon:"faCamera",buttonClass:"btn-camera",round:!0}),r.a.createElement(je,{placeholder:"Send a chat",rightIcon:"faMicrophone",onChange:function(e){return f(e.currentTarget.value)},onEnter:O,onBlur:O,value:d}),r.a.createElement("div",{className:"right"},r.a.createElement(we,{icon:"faSmileWink"}),r.a.createElement(we,{icons:["faMobile","faMobileAlt"],buttonClass:"btn-archive"}),r.a.createElement(we,{icon:"faRocket"})))),r.a.createElement("audio",{ref:l,className:"app-sound"}))}),Ze=(a(138),function(e){var t=e.count,a=void 0===t?1:t;return r.a.createElement(r.a.Fragment,null,new Array(a).fill(null).map((function(e,t){return r.a.createElement("article",{key:"frame-".concat(t),className:"skeleton-frame"})})))}),Qe=(a(139),function(e){var t=e.title,a=e.image,n=e.testId;return r.a.createElement("article",{className:"pod spotlight","data-test":n},r.a.createElement("img",{src:a,alt:""}),r.a.createElement("div",{className:"meta"},r.a.createElement("header",null,t)))}),Ke=(a(140),function(e){var t=e.drawerContent,a=Object(n.useRef)(null),c=Object(n.useRef)(!1),o=Object(n.useRef)(function(e,t){var a;return function(){for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];var o=function(){a=null,e.apply(void 0,r)};clearTimeout(a),a=setTimeout(o,t)}}((function(){!c.current&&function(e,t){var a=e.getBoundingClientRect(),n=a.top,r=a.bottom;return t?n>=0&&r<=window.innerHeight:n<window.innerHeight&&r>=0}(a.current)&&u((function(e){return e+1}))}),10)),i=Object(n.useState)(1),l=Object(j.a)(i,2),s=l[0],u=l[1],m=Object(n.useState)([]),f=Object(j.a)(m,2),p=f[0],h=f[1];return Object(n.useEffect)((function(){t.current.addEventListener("scroll",o.current)}),[t]),Object(n.useEffect)((function(){Object(y.a)(w.a.mark((function e(){var a,n,r,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.current=!0,e.next=3,x.get("/discover/page/".concat(s,".json"));case 3:if(a=e.sent,n=Object(j.a)(a,2),r=n[0],i=n[1],r){e.next=13;break}if(1!==s){e.next=11;break}return e.next=11,D(1e3);case 11:h((function(e){return[].concat(Object(d.a)(e),Object(d.a)(i.discover))})),c.current=!1;case 13:3===s&&t.current.removeEventListener("scroll",o.current);case 14:case"end":return e.stop()}}),e)})))()}),[s,t]),r.a.createElement("main",{className:"discover"},r.a.createElement(ye,{insideDrawer:!0}),r.a.createElement("section",{className:"view"},r.a.createElement(Ie,{className:"friends",header:"Friends",transparent:!0},r.a.createElement("p",null,"Stories from your friends will appear here."),r.a.createElement(we,{label:"Add Friends",purple:!0})),r.a.createElement(Ie,{header:"For You",transparent:!0},r.a.createElement("div",{className:"inner"},p.length?p.map((function(e){var t=e.image,a=e.title;return r.a.createElement(Qe,{key:t,image:t,title:a,testId:"discover-item"})})):r.a.createElement(Ze,{count:10}))),r.a.createElement("div",{ref:a,className:"load-more"})))}),$e=(a(141),function(){var e=Object(u.c)((function(e){return e.app.drawers})),t=Object(n.useRef)(null);return r.a.createElement(r.a.Fragment,null,e&&e.map((function(e){var a,n=e.component,c=e.animationIn,o=e.animationOut,i=e.animationInDuration,l=e.animationOutDuration,s=e.show,u=e.theme,m=e.position,d=document.getElementById(n);return s?null===d||void 0===d||d.classList.remove("collapse"):k((function(){return null===d||void 0===d?void 0:d.classList.add("collapse")}),l),r.a.createElement("aside",{id:n,key:n,className:pe()("drawer",(a={},Object(de.a)(a,u,!0),Object(de.a)(a,m,!0),a))},r.a.createElement("div",{className:"view","data-test":"".concat(n,"-drawer")},r.a.createElement(Ce.Animated,{animationIn:c,animationOut:o,animationInDuration:i,animationOutDuration:l,isVisible:s},r.a.createElement("section",{ref:t,className:"content","data-test":"drawer-content",style:{height:window.innerHeight+"px"}},function(e,a){return{account:r.a.createElement(Pe,null),search:r.a.createElement(Je,{show:a}),snapMap:r.a.createElement(Ge,null),snap:r.a.createElement(Ve,null),archive:r.a.createElement(We,null),chat:r.a.createElement(qe,null),discover:r.a.createElement(Ke,{drawerContent:t})}[e]}(n,s)))))})))}),Xe=(a(142),function(){var e=Object(u.b)(),t=Object(u.c)((function(e){var t=e.app;return{drawers:t.drawers,footerType:t.footerType}})),a=t.drawers,n=t.footerType;return r.a.createElement(r.a.Fragment,null,"none"!==n&&r.a.createElement("footer",{className:pe()("footer",{"light-shadow":ke(a)})},r.a.createElement("div",{className:"left"},r.a.createElement(we,{icons:["faCommentAlt","faDot"],iconClasses:[null,"new-msg"],buttonClass:"btn-chat",testId:"btn-chat",label:"Chat",onclick:function(){return e(h({component:"chat",animationIn:"slideInLeft",animationOut:"slideOutLeft",theme:"stripped"}))}})),r.a.createElement("div",{className:"center"},r.a.createElement(Ce.Animated,{animationIn:"zoomIn",animationOut:"zoomOut",animationInDuration:500,animationOutDuration:500,isVisible:"collapsed"===n,animateOnMount:!1},r.a.createElement(we,{icon:"faCircle",buttonClass:"btn-capture",testId:"btn-capture-footer",onclick:function(){e(g("full")),e(E())}})),r.a.createElement(Ce.Animated,{animationIn:"zoomIn",animationOut:"zoomOut",animationInDuration:500,animationOutDuration:500,isVisible:"full"===n,animateOnMount:!1},r.a.createElement(we,{icons:["faMobile","faMobileAlt"],buttonClass:"btn-archive",testId:"btn-archive",onclick:function(){e(g("collapsed")),e(h({component:"archive",animationIn:"slideInUp",animationOut:"slideOutDown",position:"back"}))}}))),r.a.createElement("div",{className:"right"},r.a.createElement(we,{icons:["faMobile","faMobile"],buttonClass:"btn-discover",testId:"btn-discover",label:"Discover",onclick:function(){e(g("collapsed")),e(h({component:"discover",animationIn:"slideInRight",animationOut:"slideOutRight",position:"back"}))}}))))}),et=function(e){var t=e.children,a=Object(u.b)();return Object(n.useEffect)((function(){a(B()),a(G()),a(R())}),[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne,null),r.a.createElement(ye,null),r.a.createElement("section",{className:"view"},t),r.a.createElement($e,null),r.a.createElement(Xe,null))},tt=(a(143),function(e){var t=e.takePic,a=e.closePic,c=e.videoElem,o=Object(u.b)(),i=Object(n.useRef)(null);Object(n.useEffect)((function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.documentElement,t=.01*window.innerHeight;e.style.setProperty("--vh",t+"px")}()}),[]);var l=function(){var e;return(null===i||void 0===i||null===(e=i.current)||void 0===e?void 0:e.toDataURL("image/png"))||""};Object(n.useEffect)((function(){t&&(!function(){var e,t=window,a=t.innerWidth,n=t.innerHeight,r=null===i||void 0===i||null===(e=i.current)||void 0===e?void 0:e.getContext("2d");r&&(r.canvas.width=a,r.canvas.height=n,r.drawImage(c,0,0,a,n))}(),o(z(l())))}),[t,c,o]);return r.a.createElement("section",{"data-test":"photo-capture",className:pe()("photo-capture",{hide:!t})},r.a.createElement("div",{className:"inner"},r.a.createElement("header",null,r.a.createElement(we,{icon:"faTimes",onclick:a,testId:"btn-close"})),r.a.createElement("canvas",{ref:i}),r.a.createElement("aside",null,["faTextHeight","faPen","faStickyNote","faCut","faPaperclip","faCropAlt","faStopwatch"].map((function(e){return r.a.createElement(we,{key:e,icon:e})}))),r.a.createElement("footer",null,r.a.createElement("div",{className:"left"},r.a.createElement(we,{icon:"faDownload",label:"Save",onclick:function(){var e=l();if(/iPad|iPhone|iPod/.test(M)&&!window.MSStream)window.open(e,"_blank");else{var t=document.createElement("a");t.download="download.png",t.href=e,t.click()}},buttonClass:"btn-download"}),r.a.createElement(we,{icon:"faExternalLinkAlt",label:"Story"})),r.a.createElement("div",{className:"right"},r.a.createElement(we,{icon:"faPlayCircle",label:"Send To"})))))}),at=(a(144),["dog","halloween","deform","bees","liberty"]),nt=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.camera.cameraMode})),a=Object(n.useRef)(null),c=Object(n.useRef)(null),o=Object(n.useState)(!1),i=Object(j.a)(o,2),l=i[0],s=i[1],m=Object(n.useState)(!1),d=Object(j.a)(m,2),f=d[0],p=d[1],h=Object(n.useState)(at),b=Object(j.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(""),C=Object(j.a)(O,2),I=C[0],S=C[1],M=Object(n.useState)(!1),x=Object(j.a)(M,2),D=x[0],L=x[1],T=Object(n.useState)(null),R=Object(j.a)(T,2),P=R[0],F=R[1],z=Object(n.useState)(!1),U=Object(j.a)(z,2),H=U[0],J=U[1],B=Object(n.useState)(!1),G=Object(j.a)(B,2),V=G[0],W=G[1],Y=Object(n.useCallback)(Object(y.a)(w.a.mark((function e(){var n,r,c,o,i,l,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.navigator,c=null===(n=document.querySelector("#wrapper"))||void 0===n?void 0:n.offsetWidth,"mediaDevices"in r||(r.mediaDevices={}),"getUserMedia"in r.mediaDevices||(r.mediaDevices.getUserMedia=function(e){var t=r.webkitGetUserMedia||r.mozGetUserMedia;return t?new Promise((function(a,n){return t.call(r,e,a,n)})):Promise.reject(new Error("getUserMedia() is not implemented!"))}),e.next=6,A(r.mediaDevices.getUserMedia({video:{facingMode:t,width:{ideal:c}}}));case 6:o=e.sent,i=Object(j.a)(o,2),l=i[0],s=i[1],!l&&a.current?(a.current.srcObject=s,F(s)):W(!0);case 11:case"end":return e.stop()}}),e)}))),[t]);Object(n.useEffect)((function(){Y()}),[Y]),Object(n.useEffect)((function(){if(I){window.Filters[I].init((function(){L(!0),s(!1),P.getTracks().forEach((function(e){return e.stop()}))}))}}),[I,P]);var _=function(e){var t=E.filter((function(t){return t!==e}));t.splice(2,0,e),v(t)},q=function(){var e=Object(y.a)(w.a.mark((function e(t){var a,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==I){e.next=2;break}return e.abrupt("return");case 2:if(s(!0),_(t),!D){e.next=13;break}return e.next=7,A(window.JEEFACEFILTERAPI.destroy());case 7:a=e.sent,n=Object(j.a)(a,1),n[0]||S(t),e.next=14;break;case 13:S(t);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("main",{className:"camera"},l&&r.a.createElement(Ae,{message:"Applying Filter",fixed:!0}),V&&r.a.createElement("div",{className:"not-supported"},r.a.createElement("p",null,r.a.createElement("span",{role:"img","aria-label":"crying emoji"},"\ud83d\ude2d")," ","Either your browser doesn't support the getUserMedia API used by the camera or you declined camera access!")),r.a.createElement(Ce.Animated,{animationIn:"tada",animationOut:"fadeOut",animationInDuration:1e3,animationOutDuration:0,isVisible:!l&&["dog","halloween"].includes(I),animateOnMount:!1},r.a.createElement("div",{className:"open-mouth"},r.a.createElement("strong",null,"Open Mouth"),r.a.createElement("span",{role:"img","aria-label":"tongue emoji"},"\ud83d\udc45"))),r.a.createElement("video",{ref:a,muted:!0,playsInline:!0,autoPlay:!0,className:pe()("video-stream",{hide:D||H})}),r.a.createElement(tt,{takePic:H,closePic:function(){return J(!1)},videoElem:a.current}),r.a.createElement("section",{className:"controls"},r.a.createElement(we,{icon:"faCircle",buttonClass:"btn-capture",testId:"btn-capture-main",onclick:function(){V||(J(!0),c.current&&N("cameraShutter",c.current))}}),!f&&r.a.createElement(we,{icon:"faLaugh",buttonClass:"btn-filters",testId:"btn-filters",onclick:function(){V||(p(!0),e(g("none")),k((function(){return q(E[2])}),100))}}),r.a.createElement(Ce.Animated,{animationIn:"zoomIn",animationOut:"zoomOut",animationInDuration:100,animationOutDuration:100,isVisible:f,animateOnMount:!1},r.a.createElement("div",{className:"filters","data-test":"filters"},E.map((function(e){return r.a.createElement(we,{key:e,image:"./images/filter-".concat(e,".svg"),buttonClass:"filter-".concat(e),onclick:function(){return q(e)}})}))),r.a.createElement("div",{className:"filter-actions"},r.a.createElement(we,{icon:"faMagic",round:!0}),r.a.createElement(we,{icon:"faQrcode",round:!0}),r.a.createElement(we,{icon:"faTimesCircle",buttonClass:"btn-close",onclick:function(){S(""),p(!1),L(!1),e(g("full")),Y(),window.JEEFACEFILTERAPI.destroy()}}),r.a.createElement(we,{icon:"faLaugh",round:!0}),r.a.createElement(we,{icon:"faSearch",round:!0})))),r.a.createElement("audio",{ref:c,className:"app-sound"}))},rt=(a(145),function(){return r.a.createElement("main",{className:"not-found"},r.a.createElement("div",{className:"message"},r.a.createElement("h1",null,"Well, this is awkward!"),r.a.createElement("p",null,"We couldn't find what you were looking for"),r.a.createElement(i.b,{to:"/"},r.a.createElement(Oe,{icon:"faSnapchatSquare"}),r.a.createElement("span",null,"Go Home"))))}),ct=(a(147),a(148),a(149),Object(s.a)({reducer:{app:v,camera:H,user:_,snapMap:$,snap:ce,chat:me}})),ot=function(){return r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{store:ct},r.a.createElement(i.a,null,r.a.createElement(et,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/",exact:!0,component:nt}),r.a.createElement(l.a,{path:"/snapchat-clone",exact:!0,component:nt}),r.a.createElement(l.a,{component:rt}))))))};o.a.render(r.a.createElement(ot,null),document.getElementById("root"))},57:function(e,t,a){e.exports=a(150)},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){}},[[57,1,2]]]);
//# sourceMappingURL=main.db7bb13d.chunk.js.map